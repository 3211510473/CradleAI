## 角色生成器流程更新 (包含图片生成功能)

**核心目标:** 为摇篮角色创建流程集成图片生成功能，提升用户体验。

**更新内容:**

1.  **角色外观 Tag 选择:**
    *   在进入创建角色的摇篮模式页面的外观部分，增加选项：“自己上传图片”或“根据Tag生成图片”。根据选择结果加载出不同的界面
    *   根据Tag生成图片的界面，其Tag 数据来自 `tag.json`，已完成层级和分类。
    *   为Tag生成图片的界面提供一个美观易用的 UI/UX，允许用户在界面中组合正面和负面 Tag。
 
    *   为选定的标签提供加权降权的按钮，加权会在标签外层增加{}减少[]，降权会减少{}增加[]。







**核心目标:** 为摇篮角色创建流程集成图片生成功能，提升用户体验。


**现有条件:**
    *   NovelAITestModal.tsx已经实现和服务端图片生成功能的正确交互
    *   cradle.tsx已经实现摇篮角色的创建，培育和生成。

**更新内容:**

2.  **生图任务提交:**
    *   在摇篮模式下，点击保存创建的摇篮角色后，生图请求被立即提交给服务器生图队列，而无视角色是否培育完成。摇篮模式下的生图tag将作为服务器向Novel AI发送的正/负向提示词（对应NovelAITestModal.tsx中的正向和负向提示词），每个tag用逗号隔开。
3.  **生图任务完成:**
    *   服务端生图完成并上传至minio存储桶后，app不要立即向服务端发送get请求获取图片，而是等待摇篮系统的角色生成周期完成。
4.  **角色生成与图片获取:**
    *   到达角色生成时间点，App 再向服务端发送请求，获取角色图片。
    *   **生图任务已完成:** 如果成功获取图片，将图片作为cradle.tsx页面主页中，对应的摇篮角色的背景图片。 (即cradle主页的角色卡片背景)
    *   **生图任务未完成:**
        *   **角色生成成功提示:** 右上角显示角色已生成的提示框。
        *   **生图状态提示:** 提示框显示友好的生图详情 (错误信息或排队中)。
5.  **日志记录:**
    *   提供详细可追溯的中文日志，追踪摇篮角色创建后，生图请求的发送和处理过程。 (参考测试组件的日志记录方式)

**其他:关于生图参数**

1.生成模型默认选择NAI动漫v4完整，

2.其他参数采用测试组件的默认值
